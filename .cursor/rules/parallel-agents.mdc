---
description: "Правило для главного агента: параллелизация работы через субагентов"
globs: "**/*"
alwaysApply: true
---

# Параллелизация работы через субагентов

## Основной принцип

Главный агент ВСЕГДА должен стараться распараллелить работу, запуская несколько субагентов одновременно там, где задачи не зависят друг от друга.

## Когда параллелить

### Исследование / Чтение
- Читать несколько файлов из `input/` параллельно
- Анализировать методичку и существующий контент одновременно
- Искать в разных папках одновременно

### Написание контента
- Разные главы (`content/01-intro.typ` и `content/02-chapter-1.typ`) — параллельно
- Написание текста и создание диаграмм — параллельно
- Заполнение таблиц и написание описания — параллельно

### Проверка
- Проверка компиляции и проверка орфографии — параллельно
- Чтение результата PDF и сверка с методичкой — параллельно

## Когда НЕ параллелить

- Файлы с зависимостями (сначала `meta.typ`, потом `main.typ`)
- Последовательные правки одного файла
- Когда результат одного шага нужен для другого

## Как параллелить

Запускай несколько Task tool вызовов в ОДНОМ сообщении:

```
# Правильно — 3 субагента одновременно:
Task 1: "Прочитай input/drafts/ и создай план главы 1"
Task 2: "Прочитай input/code/ и подготовь приложения с листингами"
Task 3: "Прочитай методичку input/references/ и выпиши требования"
```

## Максимум

Не запускай более 4 субагентов одновременно — это лимит.
