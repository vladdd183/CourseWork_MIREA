---
description: "Описание структуры Typst-проекта и рабочий процесс"
globs: "**/*.typ"
alwaysApply: true
---

# Структура проекта — Typst-шаблон курсовой работы МИРЭА

## Архитектура

```
main.typ              — точка входа (сборка документа)
meta.typ              — метаданные проекта (ЕДИНСТВЕННЫЙ файл для настройки!)
lib/                  — библиотека форматирования (НЕ ТРОГАТЬ при написании)
  core.typ            — apply-template(): страницы, шрифты, секционная нумерация
  title-page.typ      — генерация титульного листа МИРЭА
  headings.typ        — стили заголовков по ГОСТ 7.32-2017 + сброс счётчиков
  elements.typ        — cite-src(), fig(), tbl(), code-block(), code-file(), appendix()
  diagrams.typ        — обёртки CeTZ/CeTZ-Plot для графиков и блок-схем
  bibliography.typ    — оформление списка источников
content/              — главы курсовой (ЗДЕСЬ пишется контент!)
  00-abstract.typ     — аннотация
  01-intro.typ        — введение
  02-chapter-1.typ    — глава 1
  03-chapter-2.typ    — глава 2
  04-chapter-3.typ    — глава 3
  05-conclusion.typ   — заключение
  06-references.typ   — список использованных источников
appendices/           — приложения (листинги кода, скриншоты)
assets/               — изображения и ресурсы
input/                — исходные материалы пользователя (ТОЛЬКО ЧТЕНИЕ!)
```

## Рабочий процесс

### Принцип минимального пути

Пользователь уже потратил время на материалы в `input/`. Задача AI — СОХРАНИТЬ труд пользователя:
1. **Сначала читай** — изучи что есть в `input/`
2. **Используй дословно** — если формулировка хорошая, бери как есть
3. **Минимальные правки** — только для ГОСТ/Typst
4. **Спрашивай** — если непонятно, уточни

### Карта переноса материалов

| Материал в input/ | Целевой раздел | Файл |
|-------------------|----------------|------|
| `drafts/введение*`, `drafts/актуальность*` | Введение | `01-intro.typ` |
| `drafts/анализ*`, `drafts/обзор*` | Глава 1 | `02-chapter-1.typ` |
| `drafts/архитектура*`, `drafts/проект*` | Глава 2 | `03-chapter-2.typ` |
| `drafts/реализация*`, `drafts/тест*` | Глава 3 | `04-chapter-3.typ` |
| `drafts/заключение*` | Заключение | `05-conclusion.typ` |
| `code/*` | Приложения | `appendices/` |
| `data/*.png`, `data/*.jpg` | Изображения | `assets/` |
| `references/*` | Библиография | `06-references.typ` |

### Как работать с файлами

1. **meta.typ** — заполнить ФИО, группу, тему, руководителя
2. **content/** — писать контент, импортируя утилиты из lib/
3. **assets/** — класть изображения, ссылаться как `"assets/image.png"`
4. **main.typ** — только если нужно добавить/убрать главу из #include
5. **lib/** — НЕ ТРОГАТЬ (кроме случаев, когда нужно что-то специфическое)

## Зависимости

- `@preview/cetz:0.4.2` — векторная графика
- `@preview/cetz-plot:0.1.3` — графики и диаграммы

## Typst MCP

Для документации по Typst используй MCP сервер:
- `list_docs_chapters` — разделы документации
- `get_docs_chapter` — конкретный раздел
- `check_if_snippet_is_valid_typst_syntax` — проверка кода
- `latex_snippet_to_typst` — конвертация LaTeX → Typst

## Чеклист

### Перед началом
- [ ] Прочитал материалы в `input/`
- [ ] Заполнил `meta.typ`
- [ ] Понял требования из методички

### После завершения
- [ ] Файлы в `input/` НЕ изменены
- [ ] Документ компилируется: `just build`
- [ ] Оформление соответствует ГОСТ
